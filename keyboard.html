<!DOCTYPE html>
<html lang="tk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Ýazyjy - @YouHapp_Robot</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=JetBrains+Mono:wght@400;700&display=swap');

        :root {
            --bg: #050505;
            --primary: #00f3ff;
            --secondary: #bc13fe;
            --success: #00ff9d;
            --error: #ff0055;
            --surface: rgba(20, 20, 30, 0.6);
            --glow-strong: 0 0 15px var(--primary), 0 0 30px var(--primary);
        }

        body {
            background-color: var(--bg);
            background-image: 
                radial-gradient(circle at 50% 0%, #1a1a2e 0%, var(--bg) 80%),
                linear-gradient(0deg, transparent 24%, rgba(0, 243, 255, .03) 25%, rgba(0, 243, 255, .03) 26%, transparent 27%, transparent 74%, rgba(188, 19, 254, .03) 75%, rgba(188, 19, 254, .03) 76%, transparent 77%, transparent),
                linear-gradient(90deg, transparent 24%, rgba(0, 243, 255, .03) 25%, rgba(0, 243, 255, .03) 26%, transparent 27%, transparent 74%, rgba(188, 19, 254, .03) 75%, rgba(188, 19, 254, .03) 76%, transparent 77%, transparent);
            background-size: 100% 100%, 50px 50px, 50px 50px;
            color: var(--primary);
            font-family: 'JetBrains Mono', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            overflow-x: hidden;
            user-select: none;
        }

        .watermark {
            position: absolute;
            top: 10px;
            width: 100%;
            text-align: center;
            font-family: 'Orbitron', sans-serif;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.15);
            letter-spacing: 3px;
            pointer-events: none;
            z-index: 0;
        }

        h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            margin: 30px 0 20px;
            text-transform: uppercase;
            letter-spacing: 6px;
            color: white;
            text-shadow: 0 0 10px var(--secondary), 0 0 20px var(--secondary);
            animation: flicker 3s infinite alternate;
            text-align: center;
        }

        @keyframes flicker {
            0%, 100% { opacity: 1; text-shadow: 0 0 10px var(--secondary), 0 0 20px var(--secondary); }
            50% { opacity: 0.8; text-shadow: none; }
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            z-index: 10;
            flex-wrap: wrap;
            justify-content: center;
        }

        .diff-btn {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 8px 16px;
            cursor: pointer;
            font-family: 'Orbitron', sans-serif;
            transition: 0.3s;
            font-size: 0.9rem;
        }
        .diff-btn.active, .diff-btn:hover {
            background: var(--primary);
            color: var(--bg);
            box-shadow: var(--glow-strong);
        }

        .stats-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            z-index: 10;
            flex-wrap: wrap;
            justify-content: center;
        }

        .stat-box {
            background: var(--surface);
            border-left: 3px solid var(--secondary);
            padding: 10px 20px;
            border-radius: 4px;
            text-align: center;
            backdrop-filter: blur(10px);
            min-width: 80px;
        }

        .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: bold;
            display: block;
            color: white;
        }
        .stat-label { font-size: 0.7rem; color: #aaa; text-transform: uppercase; }

        .combo-box {
            position: absolute;
            top: 20px; right: 20px;
            text-align: right;
        }
        .combo-count {
            font-size: 2.5rem; font-weight: bold; color: var(--success);
            text-shadow: 0 0 20px var(--success);
            display: block; transition: transform 0.1s;
        }

        .typing-area-container {
            background: rgba(10, 10, 15, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 50px rgba(0, 243, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            max-width: 800px;
            width: 90%;
            position: relative;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; border-color: var(--error) !important; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }

        #quote-display {
            font-size: 1.4rem;
            line-height: 1.6;
            word-spacing: 5px;
        }

        .char { color: #555; transition: color 0.1s; }
        .char.correct { color: var(--success); text-shadow: 0 0 10px var(--success); }
        .char.incorrect { color: var(--error); text-shadow: 0 0 10px var(--error); text-decoration: underline; }
        .char.active {
            background-color: var(--primary);
            color: var(--bg);
            box-shadow: 0 0 10px var(--primary);
        }

        #input-field { position: absolute; opacity: 0; z-index: -1; }

        .restart-btn {
            margin-top: 30px;
            background: transparent;
            border: 2px solid var(--secondary);
            color: var(--secondary);
            padding: 12px 30px;
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .restart-btn:hover { background: var(--secondary); color: white; box-shadow: 0 0 20px var(--secondary); }
        
        #result-modal {
            display: none; position: fixed; top:0; left:0; width:100%; height:100%;
            background: rgba(5, 5, 10, 0.95); z-index: 100;
            justify-content: center; align-items: center; flex-direction: column;
            backdrop-filter: blur(10px);
        }
        #result-modal h2 { font-family: 'Orbitron'; font-size: 3rem; color: var(--primary); margin-bottom: 10px; }

        /* Mobil Uyum */
        @media (max-width: 600px) {
            h1 { font-size: 2rem; }
            .stat-value { font-size: 1.4rem; }
            #quote-display { font-size: 1.1rem; }
            .combo-box { top: 10px; right: 10px; }
            .combo-count { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <div class="watermark">@YouHapp_Robot</div>

    <h1>NEON ÝAZYJY</h1>

    <div class="controls">
        <button class="diff-btn active" onclick="setDifficulty('ansat')">AŇSAT</button>
        <button class="diff-btn" onclick="setDifficulty('orta')">ORTA</button>
        <button class="diff-btn" onclick="setDifficulty('kyn')">KYN</button>
    </div>

    <div class="combo-box">
        <span class="combo-count" id="combo">0</span>
    </div>

    <div class="stats-container">
        <div class="stat-box">
            <span class="stat-value" id="timer">60</span>
            <span class="stat-label">WAGT</span>
        </div>
        <div class="stat-box">
            <span class="stat-value" id="wpm">0</span>
            <span class="stat-label">WPM</span>
        </div>
        <div class="stat-box">
            <span class="stat-value" id="highscore">0</span>
            <span class="stat-label">REKORD</span>
        </div>
    </div>

    <div class="typing-area-container" id="typing-box" onclick="focusInput()">
        <div id="quote-display">Basla...</div>
        <textarea id="input-field"></textarea>
    </div>

    <button class="restart-btn" onclick="restartGame()">Täzeden Başla</button>

    <div id="result-modal">
        <h2>TAMAMLANDY!</h2>
        <div class="stats-container">
            <div class="stat-box"><span class="stat-value" id="final-wpm">0</span> WPM</div>
            <div class="stat-box"><span class="stat-value" id="final-acc">0%</span> DÜRSLÜK</div>
        </div>
        <button class="restart-btn" onclick="restartGame()">Ýene Oýna</button>
    </div>

    <script>
        // --- GENİŞLETİLMİŞ TÜRKMENÇE VERİ SETİ ---
        const quotesData = {
            ansat: [
                "Bilim akylyň çyrasydyr.",
                "Zähmet çekip gazanan lezzetini duýar.",
                "Kitap okamak, dünýäni açmakdyr.",
                "Gowy söz ýylan hininden çykarar.",
                "Wagt altyndan gymmatdyr.",
                "Akyl ýaşda däl, başdadyr.",
                "Dost dostuň aýnasydyr.",
                "Okamak iňnän bilen guýy gazmakdyr.",
                "Sabyrly bolan myradyna ýeter.",
                "Ýalan sözlemezlik mertlikdir.",
                "Güýçli bolmak üçin bilimli bolmak gerek.",
                "Sport saglygyň girewidir.",
                "Tebigaty goramak biziň borjumyzdyr.",
                "Watan mukaddesdir.",
                "Ene atany sylamak parzdyr."
            ],
            orta: [
                "Magtymguly sözle tiliň senasy, bu dünýäniň geçer ýokdur binasy.",
                "Häzirki zaman tehnologiýalary durmuşymyzy düýpgöter üýtgetdi.",
                "Programmirleme diňe kod ýazmak däl, eýsem mesele çözmek sungatydyr.",
                "Üstünlik diňe taýýarlyk we pursat gabat gelende gazanylýar.",
                "Sanly dünýäde tizlik iň möhüm zatlaryň biridir.",
                "Ylym öwrenmek hiç haçan giç däldir, esasy zat isleg.",
                "Internet ulgamy dünýäni kiçijik bir oba öwürdi.",
                "Türkmenistan - Beýik Ýüpek ýolunyň ýüregidir.",
                "Geljegimiz ýaşlaryň elindedir, olara ynam bildirmeli.",
                "Kompýuter sowatlylygy häzirki döwürde hökmanydyr.",
                "Köp okadykça, az bilýändigiňize göz ýetirersiňiz.",
                "Her bir kynçylygyň aňyrsynda bir ýeňillik bardyr."
            ],
            kyn: [
                "Emeli aň we maşyn öwrenişi, geljegiň dünýäsini şekillendirýän iň wajyp tehnologiýalardyr.",
                "Çylşyrymly kodlary ýazmak üçin sabyrlylyk we ünsli bolmak talap edilýär, ýalňyşlyk bagyşlanmaýar.",
                "Internet ulgamynda maglumat howpsuzlygy häzirki döwrüň iň uly kiber meselelerinden birine öwrüldi.",
                "Klawiaturada tiz ýazmak ukyby, pikiriňizi kompýutere bökdençsiz geçirmäge uly ýardam berýär.",
                "Uly maksatlara ýetmek üçin kiçijik ädimlerden başlamak iň dogry ýoldur.",
                "Hakyky liderler kynçylykdan gorkman, töweregindäkilere ylham berip bilýänlerdir.",
                "Tehnologiýanyň ösmegi bilen täze hünärler ýüze çykýar we köne hünärler ýitip gidýär.",
                "Dünýäni üýtgetmek isleýän adam, ilki bilen özüni üýtgetmelidir diýipdirler.",
                "Üstünlikli adamlar şowsuzlyklardan sapak alyp, ýoluna dowam edýänlerdir."
            ]
        };

        // --- DEĞİŞKENLER ---
        let currentDifficulty = 'ansat';
        let timer = 60;
        let timeLeft = timer;
        let timeElapsed = 0;
        let timerInterval = null;
        let gameStarted = false;
        let errors = 0;
        let combo = 0;
        let currentQuoteChars = [];
        let previousQuote = ""; // Aynı cümlenin arka arkaya gelmesini engellemek için

        const quoteDisplay = document.getElementById('quote-display');
        const inputField = document.getElementById('input-field');
        const timerEl = document.getElementById('timer');
        const wpmEl = document.getElementById('wpm');
        const hsEl = document.getElementById('highscore');
        const comboEl = document.getElementById('combo');
        const modal = document.getElementById('result-modal');
        const typingBox = document.getElementById('typing-box');

        hsEl.innerText = localStorage.getItem('neonHighscore') || 0;

        // --- SES SİSTEMİ ---
        let audioCtx = null;
        function playSound(type) {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            const now = audioCtx.currentTime;
            
            if(type === 'click') {
                osc.type = 'triangle'; osc.frequency.setValueAtTime(600, now);
                osc.frequency.exponentialRampToValueAtTime(100, now + 0.05);
                gain.gain.setValueAtTime(0.1, now); gain.gain.exponentialRampToValueAtTime(0.01, now + 0.05);
                osc.start(now); osc.stop(now + 0.05);
            } else if (type === 'error') {
                osc.type = 'sawtooth'; osc.frequency.setValueAtTime(100, now);
                osc.frequency.linearRampToValueAtTime(50, now + 0.15);
                gain.gain.setValueAtTime(0.2, now); gain.gain.linearRampToValueAtTime(0.01, now + 0.15);
                osc.start(now); osc.stop(now + 0.15);
            } else if (type === 'win') {
                osc.type = 'sine'; osc.frequency.setValueAtTime(440, now);
                osc.frequency.setValueAtTime(880, now + 0.1);
                gain.gain.setValueAtTime(0.3, now); gain.gain.linearRampToValueAtTime(0, now + 0.5);
                osc.start(now); osc.stop(now + 0.5);
            }
        }

        function setDifficulty(level) {
            currentDifficulty = level;
            document.querySelectorAll('.diff-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            restartGame();
        }

        function renderNewQuote() {
            const list = quotesData[currentDifficulty];
            let quote;
            
            // Rastgele ama farklı bir cümle seçme döngüsü
            let attempts = 0;
            do {
                quote = list[Math.floor(Math.random() * list.length)];
                attempts++;
            } while (quote === previousQuote && attempts < 5); // 5 denemede de aynısı gelirse mecbur kabul et
            
            previousQuote = quote; // Son seçileni kaydet

            quoteDisplay.innerHTML = '';
            currentQuoteChars = quote.split('').map(char => {
                const span = document.createElement('span');
                span.innerText = char;
                span.classList.add('char');
                quoteDisplay.appendChild(span);
                return span;
            });
            currentQuoteChars[0].classList.add('active');
        }

        function focusInput() { inputField.focus(); }

        function startGame() {
            if(gameStarted) return;
            gameStarted = true;
            timerInterval = setInterval(() => {
                timeLeft--;
                timeElapsed++;
                timerEl.innerText = timeLeft;
                calculateStats();
                if(timeLeft <= 0) endGame();
            }, 1000);
        }

        function calculateStats() {
            const typed = inputField.value.length;
            const minutes = timeElapsed / 60;
            const wpm = Math.round((typed / 5) / (minutes === 0 ? 1 : minutes));
            wpmEl.innerText = wpm;
            
            const currentHigh = parseInt(localStorage.getItem('neonHighscore') || 0);
            if(wpm > currentHigh) {
                localStorage.setItem('neonHighscore', wpm);
                hsEl.innerText = wpm;
                hsEl.style.color = '#00ff9d';
            }
        }

        function endGame() {
            clearInterval(timerInterval);
            inputField.disabled = true;
            modal.style.display = 'flex';
            playSound('win');
            
            const typed = inputField.value.length;
            let accuracy = typed > 0 ? Math.round(((typed - errors) / typed) * 100) : 0;
            if(accuracy < 0) accuracy = 0;

            document.getElementById('final-wpm').innerText = wpmEl.innerText;
            document.getElementById('final-acc').innerText = `${accuracy}%`;
        }

        function restartGame() {
            clearInterval(timerInterval);
            timeLeft = timer;
            timeElapsed = 0;
            errors = 0;
            combo = 0;
            gameStarted = false;
            
            inputField.value = '';
            inputField.disabled = false;
            
            timerEl.innerText = timeLeft;
            wpmEl.innerText = '0';
            comboEl.innerText = '';
            typingBox.classList.remove('shake');
            hsEl.style.color = 'white';
            
            modal.style.display = 'none';
            renderNewQuote();
            focusInput();
        }

        inputField.addEventListener('input', (e) => {
            if(!gameStarted) startGame();

            const arrayQuote = currentQuoteChars;
            const arrayValue = inputField.value.split('');
            const lastIdx = arrayValue.length - 1;

            let correctSoFar = true;

            arrayQuote.forEach(span => span.classList.remove('correct', 'incorrect', 'active'));
            
            arrayValue.forEach((char, index) => {
                const span = arrayQuote[index];
                if(!span) return;
                if(char === span.innerText) {
                    span.classList.add('correct');
                } else {
                    span.classList.add('incorrect');
                    correctSoFar = false;
                }
            });

            if(arrayValue.length < arrayQuote.length) {
                arrayQuote[arrayValue.length].classList.add('active');
            }

            if (arrayValue.length > 0) {
                const targetSpan = arrayQuote[lastIdx];
                if (targetSpan) {
                    if (arrayValue[lastIdx] === targetSpan.innerText) {
                        playSound('click');
                        combo++;
                        if(combo > 10) {
                            comboEl.innerText = `COMBO x${combo}`;
                            comboEl.style.opacity = 1;
                        }
                    } else {
                        if(e.inputType !== "deleteContentBackward") {
                            playSound('error');
                            errors++;
                            combo = 0;
                            comboEl.style.opacity = 0;
                            typingBox.classList.remove('shake');
                            void typingBox.offsetWidth;
                            typingBox.classList.add('shake');
                        }
                    }
                }
            }

            // Cümle bitti mi? (Daha akıcı geçiş)
            if(arrayValue.length >= arrayQuote.length) {
                inputField.value = '';
                renderNewQuote();
                playSound('win');
            }
        });

        document.addEventListener('keydown', (e) => {
            if(e.key === 'Tab') {
                e.preventDefault();
                restartGame();
            }
        });

        restartGame();
    </script>
</body>
</html>
